#include <stdio.h>
#include <stdlib.h>


int main(){

	int c, n, j, k, faturamento, p, q;

	while((scanf("%d", &c)) != EOF){
		scanf("%d", &n);

		int i = 0, t = 0, u = 0, vdd = 1, vdd2 = 1;

		int *placa = (int *)malloc(n * sizeof(int));
		int *quant = (int *)malloc(n * sizeof(int));
		int *ferro_velho_placa = (int *)malloc(n * sizeof(int));
		int *ferro_velho_quant = (int *)malloc(n * sizeof(int));

		// Ferro Velho para n√£o ter contagem dupla

		int cont = 0, tam = c;
		char caracter;

		while(i < n){
			vdd = 1;
			vdd2 = 1;
			scanf("%c", &caracter);;
			if(caracter == 'C'){
				i += 1;
				scanf("%d", &p);
				scanf("%d", &q);
				if(tam >= q){
					for(k = 0; k < i; k++){
						if(placa[k] == p || ferro_velho_placa[k] == p){
							vdd = 0;
							break;
						}
					}if(vdd == 1){
						cont += 1;
						tam -= q;
						printf("%d\n", tam);
						placa[t] = p;
						quant[t] = q;
						t += 1;

					}
				}
				if(tam < q){
					for(k = 0; k < i; k++){
						if(ferro_velho_placa[k] == p || placa[k] == p){
							vdd2 = 0;
							break;
						}
					}if(vdd2 == 1){
						ferro_velho_placa[u] = p;
						ferro_velho_quant[u] = q;
						u += 1;
					}
				}
			}if(caracter == 'S'){
				i += 1;
				scanf("%d", &p);
				for(j = 0; j < t; j++){
					if(placa[j] == p){
						vdd = 0;
						tam += quant[j];
						printf("%d\n", tam);
						placa[j] = 0;
						quant[j] = 0;
						break;
					}
				}if(vdd == 1){
					for(k = 0; k < u; k++){
						if(ferro_velho_placa[k] == p){
							tam += ferro_velho_placa[k];
							ferro_velho_placa[k] = 0;
							ferro_velho_quant[k] = 0;
							cont += 1;

						}
					}

				}
			}

		}
		for(k = 0; k < u; k++){
			printf("%d ", placa[k]);
		}
		printf("\n");
		for(k = 0; k < t; k++){
			printf("%d ", ferro_velho_placa[k]);
		}
		printf("\n");

		faturamento = cont * 10;
		printf("%d\n", faturamento);
		printf("Termina com tamanho: %d\n", tam);

		free(placa);
		placa = NULL;
		free(quant);
		quant = NULL;

	}

	return 0;
}
